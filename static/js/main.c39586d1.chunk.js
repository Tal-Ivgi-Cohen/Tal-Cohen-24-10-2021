(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{72:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(26),s=n.n(a),i=n(25),o=n(8),u=n(4),l=n.n(u),j=n(9),d=n(7);var f={loadFromStorage:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null},saveToStorage:function(e,t){localStorage[e]=JSON.stringify(t)}},p={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}};var h={saveCity:function(e,t){return m.apply(this,arguments)},removeCity:function(e){try{var t=x.findIndex((function(t){return t._id===e}));return x.splice(t,1),f.saveToStorage(b,x),Promise.resolve()}catch(n){throw new Error(n)}},loadCities:function(){try{return f.loadFromStorage(b)||[]}catch(e){throw new Error(e)}},searchCityByKey:function(e){return C.apply(this,arguments)},searchCityAutoComplete:function(e){return y.apply(this,arguments)},getCityCurrCondition:function(e){return g.apply(this,arguments)},get5DayForeCast:function(e,t){return w.apply(this,arguments)},getPos:function(e,t){return k.apply(this,arguments)}},b="city",O="QrURBt00y8CEcaBfHXIFUmOgMPwxSyDw",v="https://dataservice.accuweather.com",x=[];function m(){return(m=Object(j.a)(l.a.mark((function e(t,n){var r,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.getCityCurrCondition(t);case 3:return r=e.sent,c={_id:p.makeId(),name:n,cityCurrentCondition:r,cityKey:t},x.push(c),f.saveToStorage(b,x),e.abrupt("return",Promise.resolve(c));case 10:return e.prev=10,e.t0=e.catch(0),a=e.t0,e.abrupt("return",Promise.reject(a));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function y(){return(y=Object(j.a)(l.a.mark((function e(t){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(v,"/locations/v1/cities/autocomplete?apikey=").concat(O,"&q=").concat(t));case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),c=e.t0.message,console.log(c);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function C(){return(C=Object(j.a)(l.a.mark((function e(t){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(v,"/locations/v1/").concat(t,"?apikey=").concat(O));case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),c=e.t0.message,Promise.reject(c);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function g(){return(g=Object(j.a)(l.a.mark((function e(t){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(v,"/currentconditions/v1/").concat(t,"?apikey=").concat(O,"&details=false"));case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),c=e.t0.message,Promise.reject(c);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function w(){return(w=Object(j.a)(l.a.mark((function e(t,n){var r,c,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){return"\u2103"===n},e.prev=1,e.next=4,fetch("".concat(v,"/forecasts/v1/daily/5day/").concat(t,"?apikey=").concat(O,"&metric=").concat(r()));case 4:return c=e.sent,e.next=7,c.json();case 7:return a=e.sent,e.abrupt("return",a);case 11:e.prev=11,e.t0=e.catch(1),s=e.t0.message,Promise.reject(s);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function k(){return(k=Object(j.a)(l.a.mark((function e(t,n){var r,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(v,"/locations/v1/cities/geoposition/search?apikey=").concat(O,"&q=").concat(t,",").concat(n));case 3:return r=e.sent,e.next=6,r.json();case 6:return c=e.sent,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0),a=e.t0.message,Promise.reject(a);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function N(e){return function(t){try{t({type:"SET_CITY",cityKey:e})}catch(n){t({type:"ERROR",err:n})}}}function S(e){return function(t){try{t({type:"ERROR",msg:e})}catch(n){console.log("there was an error",n)}}}var E=n(17),T=n(46),D=n.n(T),M=n(2),R=function(e){var t=e.onSearch,n=e.onGetCityForecast,c=Object(r.useState)(""),a=Object(d.a)(c,2),s=a[0],i=a[1],o=Object(r.useState)(null),u=Object(d.a)(o,2),f=u[0],p=u[1];Object(r.useEffect)((function(){var e=function(){var e=Object(j.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(s);case 2:return n=e.sent,p(n),e.abrupt("return");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){}}),[s]);var h=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(t.target.value);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(M.jsxs)("div",{className:"city-search flex",children:[Object(M.jsx)("input",{type:"text",list:"cities",onChange:h,name:"cityInput",value:s,placeholder:"Search city \ud83d\udd0d"}),f&&Object(M.jsx)("datalist",{id:"cities",children:f.map((function(e){return Object(M.jsx)("option",{value:e.LocalizedName},e.Key)}))}),Object(M.jsx)("button",{className:"btn-search",onClick:function(){n(f[0].Key)},children:Object(M.jsx)(D.a,{})})]})},P=n(96),_=function(e){var t,n,r=e.day,c=e.degree;return Object(M.jsxs)("div",{className:"weather-preview flex column align-center justify-center",children:[Object(M.jsx)("span",{children:function(){var e=r.Date.substr(0,4),t=r.Date.substr(5,2),n=r.Date.substr(8,2);return"".concat(n,"/").concat(t,"/").concat(e)}()}),Object(M.jsxs)("div",{children:[Object(M.jsx)("span",{className:"degree",children:(t=r.Temperature.Minimum.Value,n=r.Temperature.Maximum.Value,"\u2103"===c?(""+(t+n)/2).substr(0,4):(""+((t+n)/2*9/5+32)).substr(0,4))}),Object(M.jsx)("span",{className:"degree",children:c})]}),Object(M.jsxs)("div",{className:"fillflex column align-center justify-center",children:[Object(M.jsx)("span",{className:"feel-color",children:"Feel in day: "}),"  ",r.Day.IconPhrase]}),Object(M.jsxs)("div",{className:"flex column align-center justify-center",children:[Object(M.jsx)("span",{className:"feel-color",children:"Feel in night:"}),r.Night.IconPhrase]})]})},I=function(e){var t=e.forecast,n=e.degree;return Object(M.jsx)("div",{className:"weather-list",children:t.map((function(e){return Object(M.jsx)(P.a,{variant:"outlined",className:"weather-preview-card",children:Object(M.jsx)(_,{day:e,degree:n})},e.EpochDate)}))})},K=function(e){var t=e.msg,n=e.onCloseModal;return Object(M.jsx)("div",{className:"msg-modal",children:Object(M.jsxs)("section",{className:"modal-main flex column justify-center align-center",children:[t,Object(M.jsx)("br",{}),Object(M.jsx)("button",{type:"close-modal-button",onClick:n,children:"Close"})]})})},F=n(36),L=n.n(F),B=n(35),V=n.n(B),A=function(e){var t=e.favoriteCity,n=e.onDeleteCity,c=e.onSetCity,a=e.degree,s=Object(r.useState)(""),o=Object(d.a)(s,2),u=o[0],l=o[1],j=Object(r.useState)(""),f=Object(d.a)(j,2),p=f[0],h=f[1];Object(r.useEffect)((function(){l(b()),h(O())}),[a]);var b=function(){return"\u2103"===a?t.cityCurrentCondition[0].Temperature.Metric.Value:t.cityCurrentCondition[0].Temperature.Imperial.Value},O=function(){return"\u2103"===a?t.cityCurrentCondition[0].Temperature.Metric.Unit:t.cityCurrentCondition[0].Temperature.Imperial.Unit};return Object(M.jsx)("div",{className:"fav-preview",onClick:function(){c(t.cityKey)},children:Object(M.jsxs)(i.b,{to:"/",className:"favPreview-link",children:[Object(M.jsx)("h2",{children:t.name}),Object(M.jsxs)("div",{className:"fav-content flex column justify-center align-center",children:[Object(M.jsxs)("span",{children:[u&&Object(M.jsx)("span",{children:u}),u&&Object(M.jsx)("span",{children:p})]}),Object(M.jsxs)("span",{children:[Object(M.jsx)("span",{className:"feel-color",children:"Feel in day: "}),t.cityCurrentCondition[0].WeatherText]}),Object(M.jsx)("button",{className:"delete-btn",onClick:function(e){return function(e){e.preventDefault(),n(t._id)}(e)},children:Object(M.jsx)(V.a,{})})]})]})})},U=n(95),q=function(){return Object(M.jsx)("div",{className:"loader",children:Object(M.jsx)(U.a,{})})},G=function(e){var t=e.favoriteCities,n=e.onDeleteCity,r=e.onSetCity,c=e.degree;return t&&0!==t.length?Object(M.jsx)("div",{className:"fav-list",children:t.map((function(e){return Object(M.jsx)(P.a,{variant:"outlined",children:Object(M.jsx)(A,{favoriteCity:e,onDeleteCity:n,onSetCity:r,degree:c})},e._id)}))}):Object(M.jsx)(q,{})},J=[{path:"/home",component:function(e){var t,n=Object(E.c)((function(e){return e.weatherModule})),c=n.cityKey,a=n.darkMod,s=n.degree,i=n.error,o=Object(r.useState)(""),u=Object(d.a)(o,2),f=u[0],p=u[1],b=Object(r.useState)(""),O=Object(d.a)(b,2),v=O[0],x=O[1],m=Object(r.useState)(""),y=Object(d.a)(m,2),C=y[0],g=y[1],w=Object(r.useState)(""),k=Object(d.a)(w,2),T=k[0],D=k[1],P=Object(E.b)();Object(r.useEffect)((function(){if(""===c)navigator.geolocation.getCurrentPosition(_,F);else try{A(c)}catch(e){P(S(e))}}),[]),Object(r.useEffect)((function(){try{var e=function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.loadCities();case 2:t=e.sent,g(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}catch(t){P(S(t))}return function(){}}),[]);var _=function(){var e=Object(j.a)(l.a.mark((function e(t){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.coords.latitude,r=t.coords.longitude,e.next=5,h.getPos(n,r);case 5:return c=e.sent,P(N(c.cityKey)),D(c.LocalizedName),e.next=10,A(c.Key);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),P(S(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){try{P(N("215854")),P(S("there was an error to get location"))}catch(e){P(S(e))}},B=function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.searchCityAutoComplete(t);case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),P(S(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(j.a)(l.a.mark((function e(t){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(N(t)),e.next=4,h.get5DayForeCast(t,s);case 4:return n=e.sent,e.next=7,h.getCityCurrCondition(t);case 7:return r=e.sent,e.next=10,h.searchCityByKey(t);case 10:c=e.sent,x(r[0]),p(n.DailyForecasts),D(c.LocalizedName),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),P(S(e.t0));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(M.jsx)("section",{children:Object(M.jsxs)("div",{className:"main-container",children:[Object(M.jsxs)("div",{className:"weather-page flex column",children:[Object(M.jsx)("div",{children:Object(M.jsx)(R,{onSearch:B,onGetCityForecast:A})}),Object(M.jsxs)("div",{className:"city-info flex column",children:[T&&Object(M.jsx)("h1",{children:T}),v&&Object(M.jsx)("div",{children:v.WeatherText}),f&&Object(M.jsxs)("div",{className:"current-temp",children:["\u2103"===s?v.Temperature.Metric.Value:v.Temperature.Imperial.Value,s]})]}),f&&Object(M.jsx)(I,{forecast:f,degree:s,darkMod:a}),C&&0!==C.length&&C.some((function(e){return t=e._id,e.cityKey===c}))?Object(M.jsx)("button",{className:"remove-btn",onClick:function(){try{h.removeCity(t),P(S("City removed")),e.history.push("/")}catch(n){P(S(n))}},children:Object(M.jsx)(V.a,{})}):Object(M.jsxs)("button",{className:"add-btn",onClick:function(){return function(){try{h.saveCity(c,T),P(S("City added to favorites"))}catch(e){P(S(e))}}()},children:[" ",Object(M.jsx)(L.a,{})]})]}),i&&Object(M.jsx)(K,{msg:i,onCloseModal:function(){P(S(""))}})]})})}},{path:"/favorite",component:function(e){var t=Object(E.c)((function(e){return e.weatherModule})),n=t.degree,c=t.error,a=Object(r.useState)(""),s=Object(d.a)(a,2),i=s[0],o=s[1],u=Object(E.b)();Object(r.useEffect)((function(){var e=function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.loadCities();case 2:t=e.sent,o(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),function(){}}),[c]);return Object(M.jsx)("div",{children:Object(M.jsxs)("section",{className:"main-container",children:[Object(M.jsx)("div",{className:"fav-page flex column",children:i&&Object(M.jsx)(G,{favoriteCities:i,onDeleteCity:function(t){try{h.removeCity(t);var n=h.loadCities();o(n),u(S("City removed")),e.history.push("/")}catch(r){u(S(r))}},onSetCity:function(e){try{u(N(e))}catch(t){u(S(t))}},degree:n})}),c&&Object(M.jsx)(K,{msg:c,onCloseModal:function(){u(S(""))}})]})})}}],W=n(52),z=n.n(W),X=n(54),Y=n.n(X),H=n(53),Q=n.n(H),Z=n(55),$=n.n(Z);function ee(){var e=Object(E.c)((function(e){return e.weatherModule})),t=e.darkMod,n=e.error,c=Object(r.useState)(!1),a=Object(d.a)(c,2),s=a[0],o=a[1],u=Object(r.useState)("\u2103"),l=Object(d.a)(u,2),j=l[0],f=l[1],p=Object(E.b)();Object(r.useEffect)((function(){var e;p((e=j,function(t){try{t({type:"SET_DEGREE",degree:e})}catch(n){t({type:"ERROR",err:n})}}))}),[j]),Object(r.useEffect)((function(){p(function(e){return function(t){try{t({type:"SET_DARKMOD",isDark:e})}catch(n){t({type:"ERROR",err:n})}}}(s))}),[s]);var h=function(){s?document.querySelector(".app").classList.remove("dark"):document.querySelector(".app").classList.add("dark"),o(!s)};return Object(M.jsxs)("header",{className:t?"app-header darker":"app-header",children:[Object(M.jsxs)("div",{className:"main-nav flex space-evenly",children:[Object(M.jsxs)("div",{className:"actions-btn",children:[s?Object(M.jsx)("button",{onClick:h,children:Object(M.jsx)(z.a,{})}):Object(M.jsx)("button",{onClick:h,children:Object(M.jsx)(Q.a,{})}),Object(M.jsxs)("button",{onClick:function(){f("\u2103"===j?"\u2109":"\u2103")},children:[Object(M.jsx)(Y.a,{}),j," "]})]}),Object(M.jsx)("div",{children:Object(M.jsx)("div",{className:"header-title flex",children:Object(M.jsx)("h1",{children:"Talco Weather"})})}),Object(M.jsxs)("nav",{className:"flex",children:[Object(M.jsx)(i.c,{to:"/",children:Object(M.jsx)($.a,{})}),Object(M.jsx)(i.c,{to:"/favorite",children:Object(M.jsx)(L.a,{})})]})]}),n&&Object(M.jsx)(K,{msg:n})]})}var te=function(){return Object(M.jsx)("footer",{className:"app-footer",children:Object(M.jsx)("p",{children:"Copyrights Talco Weather By Tal Cohen 2021 \xa9 "})})},ne=(n(72),function(){return Object(M.jsx)(i.a,{children:Object(M.jsxs)("div",{className:"app",children:[Object(M.jsx)(ee,{}),Object(M.jsx)("main",{children:Object(M.jsxs)(o.d,{children:[Object(M.jsx)(o.b,{exact:!0,path:"/",render:function(){return Object(M.jsx)(o.a,{to:"/home"})}}),J.map((function(e){return Object(M.jsx)(o.b,{exact:!0,component:e.component,path:e.path},e.path)}))]})}),Object(M.jsx)("footer",{children:Object(M.jsx)(te,{})})]})})}),re=n(29),ce=n(56),ae=n(20),se={cityKey:"",error:"",darkMod:!1,degree:"\u2103"};var ie=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||re.c,oe=Object(re.b)({weatherModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CITY":return Object(ae.a)(Object(ae.a)({},e),{},{cityKey:t.cityKey});case"SET_DARKMOD":return Object(ae.a)(Object(ae.a)({},e),{},{darkMod:t.isDark});case"SET_DEGREE":return Object(ae.a)(Object(ae.a)({},e),{},{degree:t.degree});case"ERROR":return Object(ae.a)(Object(ae.a)({},e),{},{error:t.msg});default:return e}}}),ue=Object(re.d)(oe,ie(Object(re.a)(ce.a))),le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,97)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};s.a.render(Object(M.jsx)(c.a.StrictMode,{children:Object(M.jsx)(E.a,{store:ue,children:Object(M.jsx)(ne,{})})}),document.getElementById("root")),le()}},[[74,1,2]]]);
//# sourceMappingURL=main.c39586d1.chunk.js.map